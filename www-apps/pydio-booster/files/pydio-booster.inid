#!/sbin/openrc-run
# Copyright 1999-2017 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2

extra_started_commands="reload"
description_reload="Reload the Pydio Booster configuration"

: ${PYDIO_USER:=nobody}
: ${PYDIO_GROUP:=nobody}
: ${PYDIO_OPTS:="-conf /etc/pydio-booster/pydio.conf"}

name="Pydio Booster"
pidfile="/run/${SVCNAME}.pid"
command="/usr/bin/pydio"
command_args="${PYDIO_OPTS}"
command_background=yes
start_stop_daemon_args="-u $PYDIO_USER -g $PYDIO_GROUP"

depend() {
	use net
}

reload() {
	ebegin "Refreshing ${name} configuration"
	kill -USR1 $(cat ${pidfile}) &>/dev/null
	eend $? "Failed to reload ${name}"
}
